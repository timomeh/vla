---
title: File Structure
description: Learn how to structure files and folders with Vla for apps of any size.
---

Vla doesn't enforce a specific file structure. You're free to organize your code however you like. However, we recommend aligning your file structure with how Vla structures your code.

This page provides recommendations based on your app's size and complexity.

---

import { FileTree, Aside } from '@astrojs/starlight/components';

## Action Files in your Presentation Layer

Colocate [Actions](/reference/classes/action) in your presentation layer (next to your UI components) in a separate file. Create a `data.ts` file for each group of files, which belong together. This file contains one or more Vla Actions, but no other layers (like Services, Repos or Resources).

<FileTree>
- src/
  - app/ *Presentation Layer*
    - posts/
      - **data.ts**
      - page.ts
      - [slug]/
        - page.ts
    - authors/
      - **data.ts**
      - page.ts
      - [user]/
        - **data.ts**
        - page.ts
  - components/ *Component Library*
  - data/ *Data Layer*
    - users.ts
    - posts.ts
    - db.ts
    - kernel.ts
</FileTree>

Think of each `data.ts` file like it defines a module boundary in your presentation layer:

- Files inside a folder should only import from their closest `data.ts`.
- Keep your `components` **data-free**, as a collection of reusable UI components which don't fetch data from the data layer.
- You can also choose a different file name, like `actions.ts`.

For example, using the file structure from above:

- `posts/page.ts` and `/posts/[slug]/page.ts` would only import from `posts/data.ts`. They would not import from `authors/`.
- `authors/page.ts` would only import from `authors/data.ts`, and not from `posts/data.ts` or `authors/[users]/data.ts`.
- `authors/[user]/page.ts` would only import from `authors/[user]/data.ts`, and not from `posts/data.ts` or `authors/data.ts`.

<Aside type="tip">
Most apps won't need to have a `data.ts` file for each folder. Start with a `data.ts` in your presentation layer root, and create another one when you feel like you want to group actions.
</Aside>

## File per Model

For small apps or prototypes, keep it simple. A handful of files in a single folder is often enough.

<FileTree>
- src/
  - app/ *Your framework's routes*
  - **data/** *Data Layer*
    - **users.ts** *Services and Repos*
    - **posts.ts** *Services and Repos*
    - db.ts *Resource*
    - kernel.ts *Kernel setup*
</FileTree>

## Layer suffixes

To split model files into smaller files, you create a file for each layer and give them a suffix, like `.service.ts` and `.repo.ts`.

<FileTree>
- src/
  - app/
  - **data/**
    - resources/
      - db.ts
      - redis.ts
    - **posts.repo.ts**
    - **posts.service.ts**
    - **users.repo.ts**
    - **users.service.ts**
</FileTree>

## Folder per Model

You can additionally group services and repos by their resource. This is especially helpful if you have multiple services for a model.

<FileTree>
- src/
  - app/
  - **data/**
    - resources/
      - db.ts
      - redis.ts
    - **posts/**
      - posts.repo.ts
      - posts.service.ts
    - **users/**
      - users.repo.ts
      - users.service.ts
      - authors.service.ts
</FileTree>

## Folder per Module

For large apps or teams, organize by **modules** to separate domains. Each module has its own directory with its own structure inside.

<FileTree>
- src/
  - app/
  - **data/**
    - kernel.ts
    - resources/
      - db.ts
      - redis.ts
    - **users/**
      - user.facade.ts *Public API for other modules*
      - user.module.ts
      - user.repo.ts
      - user.service.ts
    - **billing/**
      - billing.facade.ts *Public API for other modules*
      - billing.module.ts
      - invoice.repo.ts
      - invoice.service.ts
      - subscription.repo.ts
      - subscription.service.ts
    - **analytics/**
      - analytics.facade.ts *Public API for other modules*
      - analytics.module.ts
      - analytics.repo.ts
      - analytics.service.ts
</FileTree>

## Module Growth Patterns

As a module grows, you can further organize it internally.

### Small Module

Keep everything flat within the module directory.

<FileTree>
- data/
  - **users/**
    - user.facade.ts
    - user.module.ts
    - user.repo.ts
    - user.service.ts
</FileTree>

### Group by Model

Group by model when the module has multiple models.

<FileTree>
- data/
  - **billing/**
    - billing.module.ts
    - billing.facade.ts
    - **invoice/**
      - invoice.repo.ts
      - invoice.service.ts
    - **subscription/**
      - subscription.repo.ts
      - subscription.service.ts
    - **payment/**
      - payment.repo.ts
      - payment.service.ts
</FileTree>

## General Guidelines

### Keep Resources Global

Resources like database clients are typically shared across modules, so keep them in a shared location.

<FileTree>
- data/
  - **resources/**
    - **db.ts**
    - **redis.ts**
    - **s3.ts**
  - users/
  - billing/
</FileTree>

<Aside>
Because resources are often shared across modules, they can be injected cross-module, like Facades.
</Aside>

## Migration Path

You don't need to choose the "perfect" structure upfront. Start simple and evolve:

1. **Start small** - Single file or flat structure
2. **Split when needed** - Break out files as they grow
3. **Group when clear** - Add folders when grouping becomes obvious
4. **Modules when scaling** - Introduce modules when domains become distinct